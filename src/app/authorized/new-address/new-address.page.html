

<div class="container">
  <div class="row">
    <ion-toolbar>
      <ion-buttons slot="start" routerLink="../select-address">
        <ion-back-button default-href="#"></ion-back-button>
      </ion-buttons>
      <ion-title> Add New Address </ion-title>
      <ion-buttons slot="secondary">
        <ion-button>
          <ion-icon name="notifications-outline"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </div>
</div>

<ion-content>
  <form [formGroup]="addressForm">
    <div class="input">
      <ion-select
        formControlName="state"
        aria-label="state"
        interface="action-sheet"
        toggleIcon="chevron-down"
        justify="space-between"
        placeholder="State"
        (ionChange)="fetchCities($event)"
        #selectedState
      >
        <ion-select-option [value]="state" *ngFor="let state of states$ | async"
          >{{state.state | titlecase}}</ion-select-option
        >
      </ion-select>
    </div>
    <div class="input">
      <ion-select
        formControlName="city"
        aria-label="city"
        interface="action-sheet"
        toggleIcon="chevron-down"
        justify="space-between"
        placeholder="City"
        (ionChange)="fetchAreas($event,selectedState.value.id)"
      >
        <ion-select-option [value]="city" *ngFor="let city of cities$ | async"
          >{{city.name | titlecase}}</ion-select-option
        >
      </ion-select>
    </div>
    <div class="input">
      <input type="text" formControlName="name" placeholder="Name" />
    </div>
    <div class="">
      <ion-toolbar>
        <ion-searchbar formControlName="area" placeholder="Search Area" [debounce]="1000" (ionInput)="getAreaOnSearch($event)"></ion-searchbar>
      </ion-toolbar>
      <ion-list>
          <ion-item class="ion-border"*ngFor="let item of areaOptions" (click)="onAreaDropdownSelect(item)" tappable>
              <ion-label > {{ item?.formatted_address }}</ion-label>
          </ion-item>
      </ion-list>
    </div>
    
    <div class="input">
      <input type="number" formControlName="pincode" placeholder="Pin Code" />
    </div>
    <div class="input">
      <input
        type="text"
        formControlName="addressLine1"
        placeholder="House/Flat/Block/Building"
      />
    </div>
    <google-map
      height="400px"
      width="100%"
      [center]="center"
      [zoom]="zoom"
      (mapClick)="moveMap($event)"
      (mapMousemove)="move($event)"
    >
      <map-marker
        *ngIf="currentPosition"
        [options]="markerOptions"
        [position]="currentPosition"
        (mapDragend)="newPosition($event)"
      ></map-marker>
    </google-map>
    <ion-button expand="block" color="dark" (click)="submit()">
      Next
    </ion-button>
  </form>
</ion-content>

<!-- <ion-content [fullscreen]="true">
  <div class="container">
    <div class="row">
      <form class="col formdiv" [formGroup]="addressForm">
        <select class="address-fields"  formControlName = "state" id="">
          <option value="State">State</option>
        </select>

        <select class="address-fields"  formControlName = "city" id="">
          <option value="City">City</option>
        </select>

        <input
        class="address-fields"
          type="text"
          formControlName="pincode"
          placeholder="Pin Code"
          aria-label="default input example"
        />

        <select class="address-fields" formControlName = "area" id="">
          <option value="Area">Area</option>
        </select>

        <input
          class="address-fields"
          type="text"
          formControlName="address"
          placeholder="House/Flat/Block/Building"
          aria-label="default input example"
        />
        
      </form>
    </div>
    <div class="map-div">
        <img
          src="assets/Group1000003125.png"
          alt="Add New Address"
        />
    </div>
    <div class="save-button">
        <ion-button (click)="submit()">Save Address</ion-button>
    </div>
  </div>
</ion-content> -->
